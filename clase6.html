<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Clase 6</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="common.css">
    <!-- Solarized theme -->
    <link id="light-theme" rel="stylesheet" href="dist/theme/solarized.css">
    <!-- Moon theme -->
    <link id="dark-theme" rel="stylesheet" href="dist/theme/moon.css" disabled>

    <link rel="stylesheet" href="plugin/highlight/atom-one-dark.css">
</head>

<body data-theme="light">
    <a href="index.html" class="back-link">Volver</a>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <svg class="icon sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="icon moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>
    <div class="reveal">
        <div class="slides">
            <!--TEXTO IZQUIERDA - C√ìDIGO DERECHA -->
            <section data-auto-animate>
                <h1 data-id="titlepandas">Uso de datasets en Pandas</h1>
            </section>
            <section data-auto-animate>
                <h1 data-id="titlepandas">Uso de datasets en Pandas</h1>
                <div style="display: flex; gap: 4rem;">
                    <div>
                        <p style="align-content: baseline;">
                        <ul>
                            <li style="margin-bottom: 10px;">Pandas (cuyo nombre proviene de <b>Pan</b>el <b>Da</b>ta)
                                es una librer√≠a
                                de Python dise√±ada para la manipulaci√≥n y el an√°lisis de datos <em>estructurados</em>
                                (datos tabulados, series temporales).</li>
                            <li style="margin-bottom: 10px;" class="fragment">Ofrece dos estructuras de datos
                                fundamentales:
                                <span class="monospace">Series</span> y <span class="monospace">DataFrame</span>.
                            </li>
                            <li style="margin-bottom: 10px;" class="fragment">Pandas est√° construido sobre NumPy.</li>
                            <li style="margin-bottom: 10px;" class="fragment">Hoy en d√≠a es una de las librer√≠as
                                fundamentales para la ciencia de datos
                                junto a NumPy, SciPy, statsmodels, scikit-learn, matplotlib, etc.</li>
                            <li style="margin-bottom: 20px;" class="fragment">Algunos de sus principales usos
                                son:
                                <ul>
                                    <li class="fragment">La importaci√≥n y exportaci√≥n de datos a diferentes formatos:
                                        CSV, Excel, JSON, HTML, Stata, SQL, etc.</li>
                                    <li class="fragment">Seleccionar y filtrar datos; agregar, modificar y eliminar
                                        filas y columnas a tablas</li>
                                    <li class="fragment">Manejar datos faltantes (NaNs)</li>
                                    <li class="fragment">Realizar an√°lisis estad√≠sticos</li>
                                    <li class="fragment">Agrupar datos (<span class="monospace">groupby()</span>) y
                                        fusionar o combinar datasets (<span class="monospace">join()</span>)</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="fragment">
                        <p style="align-content: baseline;">
                        <ul>
                            <li>Recursos adicionales:
                                <ul style="margin-top: 20px;">
                                    <li><a href="https://pandas.pydata.org/docs/getting_started/intro_tutorials/">Tutorial
                                            oficial de
                                            Pandas</a></li>
                                    <li><a href="https://pandas.pydata.org/docs/">Documentaci√≥n completa</a></li>
                                    <li><a href="https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf">Cheatsheet de
                                            comandos</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <aside class="notes">
                        Los DataFrames de Pandas est√°n inspirados en los de R.
                        Pandas est√° pensado para trabajar con datos tabulares, heterog√©neos. Numpy, con datos num√©ricos
                        homog√©neos.
                        Pandas tambi√©n puede exportar a LaTeX (no leer).
                        ChatGPT.
                    </aside>
            </section>
            <section data-background-iframe="https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf"
                data-background-interactive data-preload></section>
            <section style="display: flex; flex-direction: column; align-items: left; gap: 2rem;">
                <h2>Series</h2>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 2rem;">
                    <div style="flex: 2; text-align: left;">
                        <ul>
                            <li>Una Serie es un array 1-dim cuya secuencia de valores est√° asociada a un <em>√≠ndice</em>
                                de etiquetas.</li>
                            <li class="fragment" data-fragment-index="1">Por defecto, el √≠ndice es num√©rico. Si la Serie
                                tiene longitud $N$, el
                                √≠ndice contendr√° los enteros desde $0$ a $N - 1$.</li>
                            <li class="fragment" data-fragment-index="2">El √≠ndice nos permite seleccionar uno o varios
                                elementos a trav√©s de
                                sus etiquetas.</li>
                            <li class="fragment" data-fragment-index="3">¬°Operar sobre la Serie a trav√©s de funciones de
                                NumPy no cambia el
                                √≠ndice!</li>
                            <li class="fragment" data-fragment-index="4"><span class="monospace">isnull()</span> nos
                                permite comprobar si hay
                                datos faltantes.</li>
                            <li class="fragment" data-fragment-index="5">¬°Y las operaciones sobre varias series (e.g.
                                sumas) se alinean con
                                respecto a los √≠ndices!</li>
                        </ul>
                    </div>
                    <div style="flex: 2; text-align: left;" class="r-stack">
                        <pre style="height: 700px;"><code class="python" data-line-numbers>

                        </code></pre>
                        <pre style="height: 700px;" class="fragment" data-fragment-index="1"><code class="python" data-line-numbers>
datos = [3, -2, 0, 42]                            
obj = pd.Series(datos)
print(obj)
# 0     3
# 1    -2
# 2     0
# 3    42
# dtype: int64



# Creamos una serie especificanado un √≠ndice
obj2 = pd.Series(datos, index=['a', 'd', 'g', 'w'])
print(obj2)
# a     3
# d    -2
# g     0
# w    42
# dtype: int64

                        </code></pre>
                        <pre style="height: 700px;" class="fragment" data-fragment-index="2"><code class="python" data-line-numbers>
obj2 = pd.Series(datos, index=['a', 'd', 'g', 'w'])
print(obj2)
# a     3
# d    -2
# g     0
# w    42
# dtype: int64




# Selecci√≥n de datos a trav√©s de etiquetas
print(obj2['a'])    # 3
obj2['w'] = 100 
print(obj2[['a', 'w']])  
# a      3
# w    100
# dtype: int64

                        </code></pre>
                        <pre style="height: 700px;" class="fragment" data-fragment-index="3"><code class="python" data-line-numbers>
# El filtrado y las operaciones mantienen las etiquetas
print(obj2[obj2 > 70])
# w    100
# dtype: int64
print(obj2 * 3)
# a      9
# d     -6
# g      0
# w    300
# dtype: int64
print(np.exp(obj2))
# a    2.008554e+01
# d    1.353353e-01
# g    1.000000e+00
# w    2.688117e+43
# dtype: float64

                        </code></pre>
                        <pre style="height: 700px;" class="fragment" data-fragment-index="4"><code class="python" data-line-numbers>
# Creamos una serie a partir de un diccionario
datos_ciudades = {'A Coru√±a': 249261, 'Lugo': 99482, 
                    'Ourense': 104891, 'Pontevedra': 83077}
# Pero damos un √≠ndice distinto al del diccionario
ciudades = pd.Series(datos_ciudades, 
            index=['Santiago', 'Lugo', 'Ourense', 'Vigo'])
print(ciudades)    
# Santiago         NaN
# Lugo         99482.0
# Ourense     104891.0
# Vigo             NaN
# dtype: float64

pd.isnull(ciudades)     # Tambi√©n existe notnull()
# Santiago     True
# Lugo        False
# Ourense     False
# Vigo         True
# dtype: bool

                        </code></pre>
                        <pre style="height: 700px;" class="fragment" data-fragment-index="5"><code class="python" data-line-numbers>
print(ciudades)    
# Santiago         NaN
# Lugo         99482.0
# Ourense     104891.0
# Vigo             NaN
# dtype: float64

pd.isnull(ciudades)     # Tambi√©n existe notnull()
# Santiago     True
# Lugo        False
# Ourense     False
# Vigo         True
# dtype: bool




nuevos_nacimientos = pd.Series({'Ourense': 5000, 'Vigo': 5000})
print(ciudades + nuevos_nacimientos)   
# Lugo             NaN
# Ourense     109891.0
# Santiago         NaN
# Vigo             NaN
# dtype: float64

                        </code></pre>
                    </div>
                </div>
                <aside class="notes">
                    Si sumas dos series que tienen distinto √≠ndice, el √≠ndice del resultado es la uni√≥n de los √≠ndices
                    de los operandos.
                    Si uno de los dos operandos no tiene una cierta etiqueta en su √≠ndice, el resultado ser√° NaN.
                </aside>
            </section>
            <section style="display: flex; flex-direction: column; align-items: left; gap: 2rem;" data-auto-animate>
                <h2>DataFrames</h2>
                <div>
                    <div>
                        <img src="media/6/series_to_dataframe.png">
                    </div>
                </div>
            </section>
            <section style="display: flex; flex-direction: column; align-items: left; gap: 2rem;" data-auto-animate>
                <h2>DataFrames</h2>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 2rem;">
                    <div style="flex: 2; text-align: left;">
                        <img src="media/6/series_to_dataframe.png">
                    </div>
                    <div style="flex: 2; text-align: left;">
                        <img src="media/6/dataframe_structure.png">
                    </div>
                </div>
            </section>
            <section style="display: flex; flex-direction: column; align-items: left; gap: 2rem;">
                <h2>DataFrames</h2>
                <ul>
                    <li>Un DataFrame representa una tabla de datos y contiene una colecci√≥n ordenada de columnas, que
                        pueden tener distintos tipos de datos.</li>
                    <li class="fragment">Un DataFrame tiene dos √≠ndices: el de filas y el de columnas.</li>
                    <li class="fragment">Existen diferentes formas de crear un DataFrame.</li>
                </ul>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 0.1rem;">
                    <div style="flex: 1; text-align: center; max-width: 33%;">
                        <p>Desde un diccionario de listas/arrays de NumPy</p>
                        <pre><code class="python">
datos = {
    'nombre': ["Marcos", "Eva", "Xoel"],
    'edad': [40, 35, 23],
    'tiene_perro': [False, True, True]}
# columns permite reordenar las columnas
# Si no se encuentran los datos para alguna 
# columna, sus valores son NaNs
df = pd.DataFrame(datos, columns=['nombre', 
        'tiene_perro', 'sueldo', 'edad'])
print(df)
#    nombre  tiene_perro sueldo  edad
# 0  Marcos        False    NaN    40
# 1     Eva         True    NaN    35
# 2    Xoel         True    NaN    23
                        </code></pre>
                    </div>
                    <div style="flex: 1; text-align: center; max-width: 33%;">
                        <p>Desde una lista/array de diccionarios</p>
                        <pre><code class="python">
datos2 = [
    {'nombre': "Marcos", 'edad': 40, 
                'tiene_perro': False},
    {'nombre': "Eva", 'edad': 35, 
                'tiene_perro': True},
    {'nombre': "Xoel", 'edad': 23, 
                'tiene_perro': True}
]
df2 = pd.DataFrame(datos2)
print(df2)
#    nombre  edad  tiene_perro
# 0  Marcos    40        False
# 1     Eva    35         True
# 2    Xoel    23         True
                        </code></pre>
                    </div>
                    <div style="flex: 1; text-align: center; max-width: 33%;">
                        <p>Desde archivos<br>(CSV, Excel, JSON...)</p>
                        <pre><code class="python">
# Desde un archivo CSV
df3 = pd.read_csv('ruta/al/archivo.csv', 
    header=0,   # header en la primera l√≠nea 
    sep="\t")   # campos separados por tabs

# Desde un archivo Excel
df4 = pd.read_excel('ruta/al/archivo.xlsx')

# Desde un archivo JSON
df5 = pd.read_json('ruta/al/archivo.json')




                        </code></pre>
                    </div>
                </div>
                <p style="text-align: right;"><small>Hay m√°s posibilidades, como a partir de <em>nested
                            dictionaries</em>.</small></p>
                <aside class="notes">
                    Los √≠ndices pueden tener varios niveles (MultiIndex).
                    Al indicar columns, tambi√©n se podr√≠a cambiar el index, como con Series.
                    Una vez creado un diccionario, se puede reindexar. En general, nos saltaremos bastante cosas de los
                    √≠ndices.
                </aside>
            </section>
            <section>
                <h2>Selecci√≥n de datos</h2>
                <div class="r-stack">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem;"
                        class="fragment current-visible">
                        <div
                            style="display: flex; text-align: left; flex-direction: column; gap:2rem; align-items: flex-start;">
                            <p style="margin: 0;">Podemos seleccionar columnas espec√≠ficas a trav√©s<br> de su nombre,
                                con dos posibilidades:
                            <pre style="margin: 0"><code class="python" >
columna_nombre = df['nombre']     
columna_nombre = df.nombre      # Mismo resultado que df['nombre']
print(columna_nombre)
# 0    Marcos
# 1       Eva
# 2      Xoel
# Name: nombre, dtype: object
print(type(columna_nombre))     # class 'pandas.core.series.Series'

                        </code></pre>
                        </div>
                        <div style="display: flex; text-align: left; flex-direction: column; gap:2rem;">
                            <p style="margin: 0">Y tambi√©n podemos seleccionar varias columnas a la vez:</p>
                            <pre style="margin: 0"><code class="python" >
filtrado = df[['nombre', 'edad']]
print(filtrado)
#    nombre  edad
# 0  Marcos    40
# 1     Eva    35
# 2    Xoel    23

                    </code></pre>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem;" class="fragment">
                        <div
                            style="display: flex; text-align: left; flex-direction: column; gap:2rem; align-items: flex-start;">
                            <p style="margin: 0;">Para seleccionar filas y filtrar seg√∫n una condici√≥n, podemos usar la
                                misma notaci√≥n que con series:
                            <pre style="margin: 0"><code class="python" >
print(df[:2])
#    nombre  edad  tiene_perro
# 0  Marcos    40        False
# 1     Eva    35         True

# "and" y "or" no funcionan, como en NumPy
filtrado = df[(df['edad'] < 30) | (df['nombre'] == "Marcos")]     
print(filtrado)
#    nombre  edad  tiene_perro
# 0  Marcos    40        False
# 2    Xoel    23         True
                        </code></pre>
                        </div>
                        <div style="display: flex; text-align: left; flex-direction: column; gap:2rem;">
                            <p style="margin: 0">Para seleccionar por filas y columnas a la vez, se puede usar
                                <span class="monospace">loc[]</span>, al que se le deben pasar etiquetas, o
                                <span class="monospace">iloc[]</span>, al que se le debe pasar la posici√≥n de la
                                fila/columna como un entero.
                            </p>
                            <pre style="margin: 0"><code class="python" >
print(df.loc[:, 'tiene_perro'])     # Todas las filas, columna 'tiene_perro'
# 0    False
# 1     True
# 2     True
# Name: tiene_perro, dtype: bool

print(df.iloc[1:, 1])               # Filas de 1 en adelante, primera columna
# 1     Eva
# 2    Xoel
# Name: nombre, dtype: object

print(df.iloc[1:, 1][df['edad'] < 28])    # Filtrado despu√©s de indexar
# 2    23
# Name: edad, dtype: int64
                    </code></pre>
                        </div>
                    </div>
                </div>
                <aside class="notes">
                    Tambi√©n se pueden seleccionar varias filas/columnas individuales e.g. df.iloc[1, [0, 2]]
                </aside>
            </section>
            <section>
                <h2>Operaciones aritm√©ticas con DataFrames</h2>
                <p>Muy similares a las de las series, pero alineando los datos tanto por fila como por columna.</p>
                <pre><code class="python" style="max-height: fit-content;">
df1 = pd.DataFrame(np.arange(12).reshape((4, 3)), columns=['c1', 'c2', 'c3'], index=['r1', 'r2', 'r3', 'r4'])
df2 = pd.DataFrame(np.full((4, 4), 100), columns=['c1', 'c2', 'c4', 'c5'], index=['r1', 'r2', 'r4', 'r5'])

print(df1)
#     c1  c2  c3
# r1   0   1   2
# r2   3   4   5
# r3   6   7   8
# r4   9  10  11

print(df2)
#      c1   c2   c4   c5
# r1  100  100  100  100
# r2  100  100  100  100
# r4  100  100  100  100
# r5  100  100  100  100

print(df1 + df2)
#        c1     c2  c3  c4  c5
# r1  100.0  101.0 NaN NaN NaN
# r2  103.0  104.0 NaN NaN NaN
# r3    NaN    NaN NaN NaN NaN
# r4  109.0  110.0 NaN NaN NaN
# r5    NaN    NaN NaN NaN NaN
                </code></pre>
            </section>
            <section>
                <h2>Lambdas</h2>
                <p>Tambi√©n es posible aplicar operaciones en el estilo de la programaci√≥n funcional.</p>
                <pre><code class="python" style="max-height: fit-content;">

                </code></pre>
            </section>
            <section>
                <h2>A√±adir y borrar columnas y datos</h2>
            </section>
            <section style="display: flex; flex-direction: column; justify-content: space-between;">
                <div style="display: flex; gap: 2rem; align-items: flex-start;">
                    <h2>Limpieza de datos</h2>
                    <span style="text-align: left;">
                        En los proyectos de an√°lisis de datos es muy com√∫n encontrar datos faltantes (NaNs), errores de
                        medici√≥n,
                        datos duplicados, etc. Es importante saber limpiarlos de forma adecuada.
                    </span>
                </div>
                <div style="text-align: left;">
                    <p>Existen varios m√©todos de utilidad:</p>
                </div>
                <div class="r-stack">
                    <div style="display:flex; flex-direction: column; text-align: left;"
                        class="fragment current-visible">
                        <div>
                            <ul>
                                <li><span class="monospace">dropna()</span>: Elimina todas las filas y columnas que
                                    contienen NAs</li>
                            </ul>

                        </div>

                        <div
                            style="display: flex; flex-direction: row; align-items: flex-start; margin-top: 2rem; gap:2rem; justify-content: space-between;">
                            <pre><code class="python" style="max-height: fit-content;">
    datos = pd.DataFrame([[1., 6.5, 2.], 
                          [1., np.nan, np.nan], 
                          [np.nan, np.nan, np.nan], 
                          [np.nan, 6.5, 3.]])
    datos_limpios = datos.dropna()  
    
    print(datos)
    #      0    1    2
    # 0  1.0  6.5  2.0
    # 1  1.0  NaN  NaN
    # 2  NaN  NaN  NaN
    # 3  NaN  6.5  3.0
    print(datos_limpios)
    #      0    1    2
    # 0  1.0  6.5  2.0
                        </code></pre>
                        </div>
                    </div>
                    <div style="display:flex; flex-direction: column; text-align: left;"
                        class="fragment current-visible">
                        <div>
                            <ul>
                                <li><span class="monospace">dropna(how="all")</span>: Elimina solo las filas en las que
                                    todos los datos son NAs</li>
                                <li><span class="monospace">dropna(how="all", axis=1)</span>: Elimina solo las columnas
                                    en las que todos los datos son NAs</li>
                            </ul>

                        </div>

                        <div
                            style="display: flex; flex-direction: row; align-items: flex-start; margin-top: 2rem; gap:2rem; justify-content: space-between;">
                            <pre><code class="python" style="max-height: fit-content;">
datos = pd.DataFrame([[1., 6.5, 2.], 
                      [1., np.nan, np.nan], 
                      [np.nan, np.nan, np.nan], 
                      [np.nan, 6.5, 3.]])
datos_limpios = datos.dropna(how="all")  

print(datos)
#      0    1    2
# 0  1.0  6.5  2.0
# 1  1.0  NaN  NaN
# 2  NaN  NaN  NaN
# 3  NaN  6.5  3.0
print(datos_limpios)
#      0    1    2
# 0  1.0  6.5  2.0
# 1  1.0  NaN  NaN
# 3  NaN  6.5  3.0
                        </code></pre>
                        </div>
                    </div>
                    <div style="display:flex; flex-direction: column; text-align: left;"
                        class="fragment current-visible">
                        <div>
                            <p>Es com√∫n usar DataFrames para guardar datos recogidos a lo largo del tiempo. Cada columna
                                corresponde a los
                                atributos de inter√©s y cada fila, a los datos recogidos en un instante de tiempo. En tal
                                caso, se puede elegir
                                eliminar aquellas filas que no tienen un n√∫mero de mediciones suficientes.</p>
                            <ul>
                                <li><span class="monospace">dropna(thresh=n)</span>: Elimina las filas que no tienen al
                                    menos $n$ valores no NAs</li>
                            </ul>

                        </div>

                        <div
                            style="display: flex; flex-direction: row; align-items: flex-start; margin-top: 2rem; gap:2rem; justify-content: space-between;">
                            <pre><code class="python">
datos = pd.DataFrame([[1., 6.5, 2.], [1., np.nan, np.nan], [np.nan, np.nan, np.nan], [np.nan, 6.5, 3.]])
datos_limpios = datos.dropna(thresh=2)  

print(datos)
#      0    1    2
# 0  1.0  6.5  2.0
# 1  1.0  NaN  NaN
# 2  NaN  NaN  NaN
# 3  NaN  6.5  3.0
print(datos_limpios)
#      0    1    2
# 0  1.0  6.5  2.0
# 3  NaN  6.5  3.0
                        </code></pre>
                        </div>
                    </div>
                    <div style="display:flex; flex-direction: column; text-align: left;" class="fragment">
                        <div>
                            <p>En lugar de eliminar los valores faltantes, podemos optar por rellenar sus posiciones con
                                un determinado valor.</p>
                            <ul>
                                <li><span class="monospace">fillna()</span>: Sustituye los NAs por el valor pasado como
                                    argumento.</li>
                            </ul>

                        </div>

                        <div
                            style="display: flex; flex-direction: row; align-items: flex-start; margin-top: 2rem; gap:2rem; justify-content: space-between;">
                            <pre><code class="python" style="max-height: fit-content;">
datos = pd.DataFrame([[1., 6.5, 2.], [1., np.nan, np.nan], [np.nan, np.nan, np.nan], [np.nan, 6.5, 3.]])
datos_limpios = datos.fillna(0) 
datos_limpios_2 = datos.fillna(datos.mean())    # Tambi√©n admite otras estructuras de datos

print(datos)
#      0    1    2
# 0  1.0  6.5  2.0
# 1  1.0  NaN  NaN
# 2  NaN  NaN  NaN
# 3  NaN  6.5  3.0
print(datos_limpios);                        print(datos_limpios_2)
#      0    1    2                                  0    1    2         
# 0  1.0  6.5  2.0                             0  1.0  6.5  2.0 
# 1  1.0  0.0  0.0                             1  1.0  6.5  2.5
# 2  0.0  0.0  0.0                             2  1.0  6.5  2.5
# 3  0.0  6.5  3.0                             3  1.0  6.5  3.0

                        </code></pre>
                        </div>
                    </div>
                </div>
                <aside class="notes">
                    En un proyecto de an√°lisis de datos, el 80% del tiempo suele dedicarse a limpiar y transformar
                    los datos.
                    Solo el 20% restante se dedica verdaderamente a analizar los datos (80/20 rule).
                </aside>
            </section>
            <section style="display: flex; flex-direction: row; align-items: left; gap: 2rem;">
                <h2>An√°lisis estad√≠sticos</h2>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 2rem;">
                    <div style="flex: 2; text-align: left;">
                        <ul>
                            <li>Resumen de los datos (media, std, min, max, percentiles): <span
                                    class="monospace">describe()</span></li>
                            <li class="fragment">Medidas de centralizaci√≥n: <span class="monospace">mean()</span>, <span
                                    class="monospace">median()</span>, <span class="monospace">mode()</span></li>
                            <li class="fragment">Medidas de dispersi√≥n: <span class="monospace">std()</span>, <span
                                    class="monospace">var()</span>, <span class="monospace">mad()</span></li>
                            <li class="fragment">Medidas de posici√≥n relativa: <span
                                    class="monospace">quantile(q)</span>, <span class="monospace">min()</span>, <span
                                    class="monospace">max()</span></li>
                            <li class="fragment">Otras: <span class="monospace">sum()</span>, <span
                                    class="monospace">count()</span> - cuenta el n√∫mero de valores no nulos</li>
                            <li class="fragment"><span class="monospace">corr()</span> calcula la correlaci√≥n entre
                                columnas (de Pearson, Spearman o Kendall)</li>
                            <li class="fragment"><span class="monospace">cov()</span> calcula la matriz de covarianzas
                            </li>
                        </ul>
                        <p class="fragment">Otras librer√≠as, como <span class="monospace">scipy</span>, permiten realizar operaciones m√°s
                            avanzadas, como contrastes de hip√≥tesis.</p>
                    </div>

                    <div style="flex: 2;">
                        <pre><code class="python" data-line-numbers style="max-height: fit-content;">
df = pd.DataFrame({
    "A": [1, 2, 3, 4, 5],
    "B": [2, 4, 6, 8, 10],
    "C": [np.nan, 3, 8, 6, 7]
})

print(df.describe())
#               A          B         C
# count  5.000000   5.000000  4.000000
# mean   3.000000   6.000000  6.000000
# std    1.581139   3.162278  2.160247
# min    1.000000   2.000000  3.000000
# 25%    2.000000   4.000000  5.250000
# 50%    3.000000   6.000000  6.500000
# 75%    4.000000   8.000000  7.250000
# max    5.000000  10.000000  8.000000

print(df.corr())   
#           A         B         C
# A  1.000000  1.000000  0.597614
# B  1.000000  1.000000  0.597614
# C  0.597614  0.597614  1.000000

                        </code></pre>
                    </div>
                    <aside class="notes">
                        Las medidas se pueden calcular en global o sobre columnas espec√≠ficas.
                    </aside>
            </section>
            <section>
                <p>Un ejemplo sencillo: imaginemos que queremos hacer un programa para calcular las ra√≠ces de un
                    polinomio $\sum_{i=1}^n a_ix^i = 0$. Podr√≠amos modularizar cada parte del programa y organizar el
                    proyecto como:</p>
                <pre class="fragment"><code class="python">
    poly_calc/
        main.py                 # El programa principal, que importa los m√≥dulos necesarios y ense√±a un men√∫
        entrada.py              # M√≥dulo para pedir los coeficientes al usuario
        metodos_exactos.py      # M√≥dulo con los m√©todos exactos (para polinomios de grado 1-4)
        metodos_numericos.py    # M√≥dulo con los m√©todos aproximados (para polinomios de grado 5+)

                    </code></pre>
                <div class="fragment">
                    Ahora imagin√©monos que queremos extender el programa a polinomios trigonom√©tricos $\sum_{i=1}^n
                    a_i\sin(x)^i + b_i\cos(x)^i = 0$. Podr√≠amos a√±adir un m√≥dulo nuevo <span
                        class="monospace">trig.py</span>. ¬øPero tambi√©n tenemos que implementar las funciones seno y
                    coseno? <b>No, podemos importarlas de la librer√≠a est√°ndar de Python.</b>
                </div>
                <pre class="fragment"><code class="pyhton" data-line-numbers>
        from math import pi, sin, cos
        print(sin(0), cos(pi/2))

                    </code></pre>
            </section>
            <section>
                La sintaxis para importar y exportar m√≥dulos en Python es muy sencilla:
                <pre style="height: 700px;"><code class="python" data-line-numbers="1-16|17-32">
    # (Asumiendo la estructura de archivos de la diapositiva anterior)
    # main.py
    import entrada                                  # Importar un m√≥dulo
    import metodos_exactos as me                    # Importar un m√≥dulo con un alias
    from metodos_numericos import newton_raphson    # Importar una funci√≥n espec√≠fica

    # Usemos las funciones de los m√≥dulos importados
    pol = entrada.pedir_coeficientes()

    if len(pol) == 3:
        me.resolver_grado_3(pol)
    elif len(pol) > 4:
        newton_raphson(pol)
    ...



    # Los archivos de m√≥dulo simplemente definen las funciones
    # entrada.py
    def pedir_coeficientes():
        ...
    
    # metodos_exactos.py
    def resolver_grado_3(pol):
        ...
    
    # metodos_numericos.py
    def newton_raphson(pol):
        ...
    
                    </code></pre>

            </section>
            <section
                style="display: flex; flex-direction: column; align-items: flex-start; gap: 2rem; text-align: left;">
                <h3>La librer√≠a est√°ndar de Python</h3>
                <p>La instalaci√≥n de Python cuenta, adem√°s de con el int√©rprete del lenguaje, con una <a
                        href="https://docs.python.org/3/library/index.html">librer√≠a est√°ndar</a> con funcionalidades
                    esenciales</p>
                <p>Algunos ejemplos de m√≥dulos de la librer√≠a est√°ndar son:</p>
                <div style="display: flex; flex-direction: row; gap:2rem;">
                    <ul style="text-align: left; flex:1;">
                        <li><span class="monospace">math</span>: funciones matem√°ticas</li>
                        <li><span class="monospace">random</span>: n√∫meros pseudo-aleatorios y distribuciones</li>
                        <li><span class="monospace">time</span> y <span class="monospace">datetime</span>: Fecha y hora
                        </li>
                        <li><span class="monospace">shutil</span> y <span class="monospace">pathlib</span>: Manejo de
                            archivos y directorios</li>
                        <li><span class="monospace">os</span>: funciones para interactuar con el sistema operativo</li>
                        <li><span class="monospace">re</span>: expresiones regulares</li>
                        <li><span class="monospace">csv</span>: archivos CSV</li>
                        $\dots$
                    </ul>
                    <div style="flex: 1;">
                        <img src="media/4/std_lib_usage.webp">
                        <a
                            href="https://medium.com/@tobias.talaj/decoding-python-which-standard-library-components-do-you-really-need-to-know-3ae3541bb2be">Un
                            art√≠culo interesante con las funciones y m√≥dulos m√°s usadas de la librer√≠a est√°ndar</a>
                    </div>
                </div>
                <br><br>
            </section>
            <section data-auto-animate>
                <h3>Paquetes</h3>
                <div>
                    <p style="font-size: 3rem;">¬øQu√© hacemos si necesitamos una funcionalidad que no est√° en la librer√≠a
                        est√°ndar?</p>
                    <p style="font-size: 3rem;" data-id="paq">ü§ìDejamos de ser vagos y desarrollamos c√≥digoü§ì</p>
                </div>
            </section>
            <section data-auto-animate>
                <h3>Paquetes</h3>
                <div>
                    <p style="font-size: 3rem;">¬øQu√© hacemos si necesitamos una funcionalidad que no est√° en la librer√≠a
                        est√°ndar?</p>
                    <p style="font-size: 3rem;" data-id="paq"><s>ü§ìDejamos de ser vagos y desarrollamos c√≥digoü§ì</s>
                        <b>üóøUsamos paquetesüóø</b>
                    </p>
                    <ul class="fragment">
                        <li>En Python, una gran comunidad de desarrolladores ha creado infinidad de paquetes con los que
                            se pueden construir todo tipo de programas con facilidad, incluso sin ser un experto en la
                            materia.</li>
                        <li>Estos paquetes incluyen m√≥dulos que podemos importar de la misma forma que los desarrollados
                            por nosotros.</li>
                        <li>Los gestores de paquetes facilitan enormemente su instalaci√≥n, veremos como funcionan <span
                                class="monospace">pip</span> y <span class="monospace">conda</span></li>
                    </ul>
                </div>
            </section>
            <!-- SIDE BY SIDE CON CODIGO -->
            <section>
                <h2>Gestores de paquetes</h2>
            </section>
            <section style="display: flex; flex-direction: column; align-items: left; gap: 2rem;">
                <h2>pip</h2>
                <h4><a target="_blank" href="https://pypi.org/project/pip/">https://pypi.org/project/pip/</a></h4>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 2rem;">
                    <div style="flex: 2; text-align: left;">
                        <ul>
                            <li class="fragment">Es el gestor por defecto de paquetes de Python</li>
                            <li class="fragment">Permite instalar, actualizar y manejar dependencias entre paquetes</li>
                            <li class="fragment">Se pueden guardar configuraciones en archivos <span
                                    class="monospace">requirements.txt</span>
                        </ul>
                    </div>
                    <div style="flex: 3; text-align: left;" class="fragment" data-line-numbers>
                        <pre><code class="bash">
    # Estos comandos se ejecutan en una terminal!
    # NOTA: Si tienes varias versiones de Python instaladas, 
    # usar python -m pip en vez de pip
    pip --version         # Comprobar versi√≥n instalada
    
    # Gestionar paquetes
    pip install manim # Instalar el paquete manim
    pip install --upgrade manim # Actualizar el paquete manim
    pip install --uninstall manim # Desinstalar el paquete manim

                            </code></pre>
                    </div>
                </div>
            </section>
            <section>
                <h3>pip</h3>
                <p>Una tarea importante suele ser compartir nuestra lista de paquetes con otros desarrolladores</p>
                <div style="display: flex; flex-direction: row; gap: 2rem;">
                    <div class="fragment" data-fragment-index="1">
                        <img src="media/4/pip list.png" height="50%">
                        <p>1. Listamos los paquetes
                        <div class="monospace">pip list</div>
                        </p>
                    </div>
                    <div style="margin-top: 10rem;" class="fragment" data-fragment-index="2">
                        $\rightarrow$
                    </div>
                    <div class="fragment" data-fragment-index="2">
                        <img src="media/4/pip freeze.png" height="50%">
                        <p>2. Guardamos los paquetes
                        <div class="monospace">pip freeze > requirements.txt</div>
                        </p>
                    </div>
                    <div style="margin-top: 10rem;" class="fragment" data-fragment-index="3">
                        $\rightarrow$
                    </div>
                    <div class="fragment" data-fragment-index="3">
                        <img src="media/4/pip install.png" height="50%">
                        <p>3. Instalamos los paquetes
                        <div class="monospace">pip install -r requirements.txt</div>
                        </p>
                    </div>
                </div>
            </section>
            <section>
                <h2>(mini)conda</h2>
                <p>Similar a <span class="monospace">pip</span>, pero tiene m√°s funcionalidades y es m√°s utilizado con
                    paquetes matem√°tico/cient√≠ficos</p>
                <h4><a target="_blank" href="https://repo.anaconda.com/miniconda/">Descargar instalador</a></h4>
                <h4><a target="_blank" href="https://anaconda.org/search?q=tensorflow">Buscar paquetes</a></h4>
                <div style="text-align: left; display:flex; flex-direction: row; gap:2rem;">
                    <div style="flex: 1;">
                        <p>Algunas diferencias con pip:</p>
                        <ul>
                            <li class="fragment">Los paquetes de conda est√°n pre-compilados, as√≠ que su instalaci√≥n es
                                m√°s r√°pida</li>
                            <li class="fragment">Resuelve dependencias autom√°ticamente: evita tener conflictos entre
                                versiones</li>
                            <li class="fragment">Incluye entornos virtuales que facilitan cambiar entre proyectos</li>
                            <li class="fragment">Existen muchos m√°s paquetes adicionales en <a
                                    href="https://conda-forge.org/packages"> conda-forge</a></li>
                        </ul>
                    </div>
                    <div style="flex: 1;" class="fragment">
                        <img src="media/4/conda vs pip.png">
                    </div>
                </div>
            </section>
            <section style="display: flex; flex-direction: column; align-items: left; gap: 2rem;">
                <h2>conda</h2>
                <p>La instalaci√≥n de paquetes es tan sencilla como con pip:</p>
                <pre><code class="bash">
    conda install numpy  # Instalar el paquete numpy
    conda update numpy   # Actualizar el paquete numpy
    conda remove numpy   # Desinstalar el paquete numpy

    conda install conda-forge::openai  # Instalar el paquete openai desde conda-forge
                    </code></pre>
            </section>
            <section>
                <h3>Entornos virtuales</h3>
                <p>Los entornos virtuales son una forma de aislar los paquetes de Python para que no interfieran entre
                    s√≠</p>
                <p>Esto es √∫til cuando trabajamos en varios proyectos que requieren versiones diferentes de los mismos
                    paquetes</p>

                <div style="display: flex; flex-direction: row; gap: 2rem;">
                    <div style="flex: 2;">
                        <pre><code class="bash">
    conda env list   # Ver la lista de entornos
    conda create -n mi_env python=3.10  # Crear un nuevo entorno
    conda activate mi_env  # Activar el entorno
    conda deactivate  # Salir del entorno
    conda env remove -n mi_env  # Eliminar el entorno

    # Guardar el entorno en un archivo
    conda env export > env.yml

    # Cargar el entorno desde un archivo
    conda env create -f env.yml
                            </code></pre>
                        <ul>
                            <li class="fragment" data-fragment-index="1">Se puede mezclar <span
                                    class="monospace">pip</span> y <span class="monospace">conda</span> en los entornos,
                                pero no es muy recomendable <span style="font-size: 1rem;">(de todas formas, a veces es
                                    necesario porque en pip hay m√°s paquetes)</span></li>
                            <li class="fragment" data-fragment-index="2">No queremos acabar con situaciones como las de
                                la imagen</li>
                            <li class="fragment" data-fragment-index="3">Si nos pasa algo as√≠, lo mejor es quemar el
                                ordenador</li>
                        </ul>
                    </div>
                    <div style="flex: 1" class="fragment" data-fragment-index="2">
                        <img src="media/4/env_nightmare.jpg">
                    </div>
                </div>
            </section>

            <section>
                <h3>Jupyter Notebooks</h3>
                <p class="fragment">En la siguiente parte de la clase, abriremos <span class="monospace">vscode</span> y
                    nos pondremos a jugar con paquetes, veremos que podemos hacer con ellos</p>
                <p class="fragment">Pero primero, hace falta explicar que son los <em>Jupyter Notebooks</em> (esto es
                    mucho m√°s ligero que lo anterior, we promise)</p>
            </section>
            <section>
                <h4>Uso de notebooks en vscode</h4>
                <ol>
                    <div style="display: flex; flex-direction: row; gap: 2rem;">
                        <div class="fragment" data-fragment-index="1">
                            <img src="media/4/extensiones.png" height="65%">
                            <p>1. Instalamos las extensiones de vscode de Jupyter y Python</p>
                        </div>
                        <div style="margin-top: 10rem;" class="fragment" data-fragment-index="2">
                            $\rightarrow$
                        </div>
                        <div class="fragment" data-fragment-index="2">
                            <img src="media/4/ipynb.png">
                            <p>2. Creamos un nuevo fichero <span class="monospace">.ipynb</span> d√≥nde trabajaremos</p>
                        </div>
                        <div style="margin-top: 10rem;" class="fragment" data-fragment-index="3">
                            $\rightarrow$
                        </div>
                        <div class="fragment" data-fragment-index="3">
                            <img src="media/4/kernel.png">
                            <p>3. Configuramos el <em>kernel</em> de nuestro nuevo entorno de conda</p>
                        </div>
                    </div>
                </ol>
            </section>
            <section>
                <h3>Descarga de Notebooks</h3>
                <p>Ahora pasaremos a una clase interactiva, trabajaremos con los siguientes ficheros que pod√©is
                    descargar aqu√≠ mismo:</p>
                <div style="border: 2px solid gray; padding: 1rem; border-radius: 10px;">
                    <p>
                        <a href="notebooks/notebook_intro.ipynb" download>Introducci√≥n a Jupyter Notebook</a>
                    </p>
                </div>
            </section>
        </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/math/math.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
            hash: true,
            katex: {
                version: 'latest',
                delimiters: [
                    { left: '$$', right: '$$', display: true },
                    { left: '$', right: '$', display: false },
                    { left: '\\(', right: '\\)', display: false },
                    { left: '\\[', right: '\\]', display: true },
                ],
                ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            },
            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX]
        });
    </script>
    <script src="theme-toggle.js"></script>
</body>

</html>